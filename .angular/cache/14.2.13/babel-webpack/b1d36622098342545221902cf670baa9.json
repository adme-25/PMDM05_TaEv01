{"ast":null,"code":"import { a as getWindow } from '../shared/ssr-window.esm.mjs';\nimport { e as elementChildren, a as elementParents, b as elementOffset, j as getTranslate } from '../shared/utils.mjs';\n\nfunction Zoom(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  const window = getWindow();\n  extendParams({\n    zoom: {\n      enabled: false,\n      limitToOriginalSize: false,\n      maxRatio: 3,\n      minRatio: 1,\n      panOnMouseMove: false,\n      toggle: true,\n      containerClass: 'swiper-zoom-container',\n      zoomedSlideClass: 'swiper-slide-zoomed'\n    }\n  });\n  swiper.zoom = {\n    enabled: false\n  };\n  let currentScale = 1;\n  let isScaling = false;\n  let isPanningWithMouse = false;\n  let mousePanStart = {\n    x: 0,\n    y: 0\n  };\n  const mousePanSensitivity = -3; // Negative to invert pan direction\n\n  let fakeGestureTouched;\n  let fakeGestureMoved;\n  const evCache = [];\n  const gesture = {\n    originX: 0,\n    originY: 0,\n    slideEl: undefined,\n    slideWidth: undefined,\n    slideHeight: undefined,\n    imageEl: undefined,\n    imageWrapEl: undefined,\n    maxRatio: 3\n  };\n  const image = {\n    isTouched: undefined,\n    isMoved: undefined,\n    currentX: undefined,\n    currentY: undefined,\n    minX: undefined,\n    minY: undefined,\n    maxX: undefined,\n    maxY: undefined,\n    width: undefined,\n    height: undefined,\n    startX: undefined,\n    startY: undefined,\n    touchesStart: {},\n    touchesCurrent: {}\n  };\n  const velocity = {\n    x: undefined,\n    y: undefined,\n    prevPositionX: undefined,\n    prevPositionY: undefined,\n    prevTime: undefined\n  };\n  let scale = 1;\n  Object.defineProperty(swiper.zoom, 'scale', {\n    get() {\n      return scale;\n    },\n\n    set(value) {\n      if (scale !== value) {\n        const imageEl = gesture.imageEl;\n        const slideEl = gesture.slideEl;\n        emit('zoomChange', value, imageEl, slideEl);\n      }\n\n      scale = value;\n    }\n\n  });\n\n  function getDistanceBetweenTouches() {\n    if (evCache.length < 2) return 1;\n    const x1 = evCache[0].pageX;\n    const y1 = evCache[0].pageY;\n    const x2 = evCache[1].pageX;\n    const y2 = evCache[1].pageY;\n    const distance = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);\n    return distance;\n  }\n\n  function getMaxRatio() {\n    const params = swiper.params.zoom;\n    const maxRatio = gesture.imageWrapEl.getAttribute('data-swiper-zoom') || params.maxRatio;\n\n    if (params.limitToOriginalSize && gesture.imageEl && gesture.imageEl.naturalWidth) {\n      const imageMaxRatio = gesture.imageEl.naturalWidth / gesture.imageEl.offsetWidth;\n      return Math.min(imageMaxRatio, maxRatio);\n    }\n\n    return maxRatio;\n  }\n\n  function getScaleOrigin() {\n    if (evCache.length < 2) return {\n      x: null,\n      y: null\n    };\n    const box = gesture.imageEl.getBoundingClientRect();\n    return [(evCache[0].pageX + (evCache[1].pageX - evCache[0].pageX) / 2 - box.x - window.scrollX) / currentScale, (evCache[0].pageY + (evCache[1].pageY - evCache[0].pageY) / 2 - box.y - window.scrollY) / currentScale];\n  }\n\n  function getSlideSelector() {\n    return swiper.isElement ? `swiper-slide` : `.${swiper.params.slideClass}`;\n  }\n\n  function eventWithinSlide(e) {\n    const slideSelector = getSlideSelector();\n    if (e.target.matches(slideSelector)) return true;\n    if (swiper.slides.filter(slideEl => slideEl.contains(e.target)).length > 0) return true;\n    return false;\n  }\n\n  function eventWithinZoomContainer(e) {\n    const selector = `.${swiper.params.zoom.containerClass}`;\n    if (e.target.matches(selector)) return true;\n    if ([...swiper.hostEl.querySelectorAll(selector)].filter(containerEl => containerEl.contains(e.target)).length > 0) return true;\n    return false;\n  } // Events\n\n\n  function onGestureStart(e) {\n    if (e.pointerType === 'mouse') {\n      evCache.splice(0, evCache.length);\n    }\n\n    if (!eventWithinSlide(e)) return;\n    const params = swiper.params.zoom;\n    fakeGestureTouched = false;\n    fakeGestureMoved = false;\n    evCache.push(e);\n\n    if (evCache.length < 2) {\n      return;\n    }\n\n    fakeGestureTouched = true;\n    gesture.scaleStart = getDistanceBetweenTouches();\n\n    if (!gesture.slideEl) {\n      gesture.slideEl = e.target.closest(`.${swiper.params.slideClass}, swiper-slide`);\n      if (!gesture.slideEl) gesture.slideEl = swiper.slides[swiper.activeIndex];\n      let imageEl = gesture.slideEl.querySelector(`.${params.containerClass}`);\n\n      if (imageEl) {\n        imageEl = imageEl.querySelectorAll('picture, img, svg, canvas, .swiper-zoom-target')[0];\n      }\n\n      gesture.imageEl = imageEl;\n\n      if (imageEl) {\n        gesture.imageWrapEl = elementParents(gesture.imageEl, `.${params.containerClass}`)[0];\n      } else {\n        gesture.imageWrapEl = undefined;\n      }\n\n      if (!gesture.imageWrapEl) {\n        gesture.imageEl = undefined;\n        return;\n      }\n\n      gesture.maxRatio = getMaxRatio();\n    }\n\n    if (gesture.imageEl) {\n      const [originX, originY] = getScaleOrigin();\n      gesture.originX = originX;\n      gesture.originY = originY;\n      gesture.imageEl.style.transitionDuration = '0ms';\n    }\n\n    isScaling = true;\n  }\n\n  function onGestureChange(e) {\n    if (!eventWithinSlide(e)) return;\n    const params = swiper.params.zoom;\n    const zoom = swiper.zoom;\n    const pointerIndex = evCache.findIndex(cachedEv => cachedEv.pointerId === e.pointerId);\n    if (pointerIndex >= 0) evCache[pointerIndex] = e;\n\n    if (evCache.length < 2) {\n      return;\n    }\n\n    fakeGestureMoved = true;\n    gesture.scaleMove = getDistanceBetweenTouches();\n\n    if (!gesture.imageEl) {\n      return;\n    }\n\n    zoom.scale = gesture.scaleMove / gesture.scaleStart * currentScale;\n\n    if (zoom.scale > gesture.maxRatio) {\n      zoom.scale = gesture.maxRatio - 1 + (zoom.scale - gesture.maxRatio + 1) ** 0.5;\n    }\n\n    if (zoom.scale < params.minRatio) {\n      zoom.scale = params.minRatio + 1 - (params.minRatio - zoom.scale + 1) ** 0.5;\n    }\n\n    gesture.imageEl.style.transform = `translate3d(0,0,0) scale(${zoom.scale})`;\n  }\n\n  function onGestureEnd(e) {\n    if (!eventWithinSlide(e)) return;\n    if (e.pointerType === 'mouse' && e.type === 'pointerout') return;\n    const params = swiper.params.zoom;\n    const zoom = swiper.zoom;\n    const pointerIndex = evCache.findIndex(cachedEv => cachedEv.pointerId === e.pointerId);\n    if (pointerIndex >= 0) evCache.splice(pointerIndex, 1);\n\n    if (!fakeGestureTouched || !fakeGestureMoved) {\n      return;\n    }\n\n    fakeGestureTouched = false;\n    fakeGestureMoved = false;\n    if (!gesture.imageEl) return;\n    zoom.scale = Math.max(Math.min(zoom.scale, gesture.maxRatio), params.minRatio);\n    gesture.imageEl.style.transitionDuration = `${swiper.params.speed}ms`;\n    gesture.imageEl.style.transform = `translate3d(0,0,0) scale(${zoom.scale})`;\n    currentScale = zoom.scale;\n    isScaling = false;\n\n    if (zoom.scale > 1 && gesture.slideEl) {\n      gesture.slideEl.classList.add(`${params.zoomedSlideClass}`);\n    } else if (zoom.scale <= 1 && gesture.slideEl) {\n      gesture.slideEl.classList.remove(`${params.zoomedSlideClass}`);\n    }\n\n    if (zoom.scale === 1) {\n      gesture.originX = 0;\n      gesture.originY = 0;\n      gesture.slideEl = undefined;\n    }\n  }\n\n  let allowTouchMoveTimeout;\n\n  function allowTouchMove() {\n    swiper.touchEventsData.preventTouchMoveFromPointerMove = false;\n  }\n\n  function preventTouchMove() {\n    clearTimeout(allowTouchMoveTimeout);\n    swiper.touchEventsData.preventTouchMoveFromPointerMove = true;\n    allowTouchMoveTimeout = setTimeout(() => {\n      if (swiper.destroyed) return;\n      allowTouchMove();\n    });\n  }\n\n  function onTouchStart(e) {\n    const device = swiper.device;\n    if (!gesture.imageEl) return;\n    if (image.isTouched) return;\n    if (device.android && e.cancelable) e.preventDefault();\n    image.isTouched = true;\n    const event = evCache.length > 0 ? evCache[0] : e;\n    image.touchesStart.x = event.pageX;\n    image.touchesStart.y = event.pageY;\n  }\n\n  function onTouchMove(e) {\n    const isMouseEvent = e.pointerType === 'mouse';\n    const isMousePan = isMouseEvent && swiper.params.zoom.panOnMouseMove;\n\n    if (!eventWithinSlide(e) || !eventWithinZoomContainer(e)) {\n      return;\n    }\n\n    const zoom = swiper.zoom;\n\n    if (!gesture.imageEl) {\n      return;\n    }\n\n    if (!image.isTouched || !gesture.slideEl) {\n      if (isMousePan) onMouseMove(e);\n      return;\n    }\n\n    if (isMousePan) {\n      onMouseMove(e);\n      return;\n    }\n\n    if (!image.isMoved) {\n      image.width = gesture.imageEl.offsetWidth || gesture.imageEl.clientWidth;\n      image.height = gesture.imageEl.offsetHeight || gesture.imageEl.clientHeight;\n      image.startX = getTranslate(gesture.imageWrapEl, 'x') || 0;\n      image.startY = getTranslate(gesture.imageWrapEl, 'y') || 0;\n      gesture.slideWidth = gesture.slideEl.offsetWidth;\n      gesture.slideHeight = gesture.slideEl.offsetHeight;\n      gesture.imageWrapEl.style.transitionDuration = '0ms';\n    } // Define if we need image drag\n\n\n    const scaledWidth = image.width * zoom.scale;\n    const scaledHeight = image.height * zoom.scale;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.touchesCurrent.x = evCache.length > 0 ? evCache[0].pageX : e.pageX;\n    image.touchesCurrent.y = evCache.length > 0 ? evCache[0].pageY : e.pageY;\n    const touchesDiff = Math.max(Math.abs(image.touchesCurrent.x - image.touchesStart.x), Math.abs(image.touchesCurrent.y - image.touchesStart.y));\n\n    if (touchesDiff > 5) {\n      swiper.allowClick = false;\n    }\n\n    if (!image.isMoved && !isScaling) {\n      if (swiper.isHorizontal() && (Math.floor(image.minX) === Math.floor(image.startX) && image.touchesCurrent.x < image.touchesStart.x || Math.floor(image.maxX) === Math.floor(image.startX) && image.touchesCurrent.x > image.touchesStart.x)) {\n        image.isTouched = false;\n        allowTouchMove();\n        return;\n      }\n\n      if (!swiper.isHorizontal() && (Math.floor(image.minY) === Math.floor(image.startY) && image.touchesCurrent.y < image.touchesStart.y || Math.floor(image.maxY) === Math.floor(image.startY) && image.touchesCurrent.y > image.touchesStart.y)) {\n        image.isTouched = false;\n        allowTouchMove();\n        return;\n      }\n    }\n\n    if (e.cancelable) {\n      e.preventDefault();\n    }\n\n    e.stopPropagation();\n    preventTouchMove();\n    image.isMoved = true;\n    const scaleRatio = (zoom.scale - currentScale) / (gesture.maxRatio - swiper.params.zoom.minRatio);\n    const {\n      originX,\n      originY\n    } = gesture;\n    image.currentX = image.touchesCurrent.x - image.touchesStart.x + image.startX + scaleRatio * (image.width - originX * 2);\n    image.currentY = image.touchesCurrent.y - image.touchesStart.y + image.startY + scaleRatio * (image.height - originY * 2);\n\n    if (image.currentX < image.minX) {\n      image.currentX = image.minX + 1 - (image.minX - image.currentX + 1) ** 0.8;\n    }\n\n    if (image.currentX > image.maxX) {\n      image.currentX = image.maxX - 1 + (image.currentX - image.maxX + 1) ** 0.8;\n    }\n\n    if (image.currentY < image.minY) {\n      image.currentY = image.minY + 1 - (image.minY - image.currentY + 1) ** 0.8;\n    }\n\n    if (image.currentY > image.maxY) {\n      image.currentY = image.maxY - 1 + (image.currentY - image.maxY + 1) ** 0.8;\n    } // Velocity\n\n\n    if (!velocity.prevPositionX) velocity.prevPositionX = image.touchesCurrent.x;\n    if (!velocity.prevPositionY) velocity.prevPositionY = image.touchesCurrent.y;\n    if (!velocity.prevTime) velocity.prevTime = Date.now();\n    velocity.x = (image.touchesCurrent.x - velocity.prevPositionX) / (Date.now() - velocity.prevTime) / 2;\n    velocity.y = (image.touchesCurrent.y - velocity.prevPositionY) / (Date.now() - velocity.prevTime) / 2;\n    if (Math.abs(image.touchesCurrent.x - velocity.prevPositionX) < 2) velocity.x = 0;\n    if (Math.abs(image.touchesCurrent.y - velocity.prevPositionY) < 2) velocity.y = 0;\n    velocity.prevPositionX = image.touchesCurrent.x;\n    velocity.prevPositionY = image.touchesCurrent.y;\n    velocity.prevTime = Date.now();\n    gesture.imageWrapEl.style.transform = `translate3d(${image.currentX}px, ${image.currentY}px,0)`;\n  }\n\n  function onTouchEnd() {\n    const zoom = swiper.zoom;\n    evCache.length = 0;\n    if (!gesture.imageEl) return;\n\n    if (!image.isTouched || !image.isMoved) {\n      image.isTouched = false;\n      image.isMoved = false;\n      return;\n    }\n\n    image.isTouched = false;\n    image.isMoved = false;\n    let momentumDurationX = 300;\n    let momentumDurationY = 300;\n    const momentumDistanceX = velocity.x * momentumDurationX;\n    const newPositionX = image.currentX + momentumDistanceX;\n    const momentumDistanceY = velocity.y * momentumDurationY;\n    const newPositionY = image.currentY + momentumDistanceY; // Fix duration\n\n    if (velocity.x !== 0) momentumDurationX = Math.abs((newPositionX - image.currentX) / velocity.x);\n    if (velocity.y !== 0) momentumDurationY = Math.abs((newPositionY - image.currentY) / velocity.y);\n    const momentumDuration = Math.max(momentumDurationX, momentumDurationY);\n    image.currentX = newPositionX;\n    image.currentY = newPositionY; // Define if we need image drag\n\n    const scaledWidth = image.width * zoom.scale;\n    const scaledHeight = image.height * zoom.scale;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.currentX = Math.max(Math.min(image.currentX, image.maxX), image.minX);\n    image.currentY = Math.max(Math.min(image.currentY, image.maxY), image.minY);\n    gesture.imageWrapEl.style.transitionDuration = `${momentumDuration}ms`;\n    gesture.imageWrapEl.style.transform = `translate3d(${image.currentX}px, ${image.currentY}px,0)`;\n  }\n\n  function onTransitionEnd() {\n    const zoom = swiper.zoom;\n\n    if (gesture.slideEl && swiper.activeIndex !== swiper.slides.indexOf(gesture.slideEl)) {\n      if (gesture.imageEl) {\n        gesture.imageEl.style.transform = 'translate3d(0,0,0) scale(1)';\n      }\n\n      if (gesture.imageWrapEl) {\n        gesture.imageWrapEl.style.transform = 'translate3d(0,0,0)';\n      }\n\n      gesture.slideEl.classList.remove(`${swiper.params.zoom.zoomedSlideClass}`);\n      zoom.scale = 1;\n      currentScale = 1;\n      gesture.slideEl = undefined;\n      gesture.imageEl = undefined;\n      gesture.imageWrapEl = undefined;\n      gesture.originX = 0;\n      gesture.originY = 0;\n    }\n  }\n\n  function onMouseMove(e) {\n    // Only pan if zoomed in and mouse panning is enabled\n    if (currentScale <= 1 || !gesture.imageWrapEl) return;\n    if (!eventWithinSlide(e) || !eventWithinZoomContainer(e)) return;\n    const currentTransform = window.getComputedStyle(gesture.imageWrapEl).transform;\n    const matrix = new window.DOMMatrix(currentTransform);\n\n    if (!isPanningWithMouse) {\n      isPanningWithMouse = true;\n      mousePanStart.x = e.clientX;\n      mousePanStart.y = e.clientY;\n      image.startX = matrix.e;\n      image.startY = matrix.f;\n      image.width = gesture.imageEl.offsetWidth || gesture.imageEl.clientWidth;\n      image.height = gesture.imageEl.offsetHeight || gesture.imageEl.clientHeight;\n      gesture.slideWidth = gesture.slideEl.offsetWidth;\n      gesture.slideHeight = gesture.slideEl.offsetHeight;\n      return;\n    }\n\n    const deltaX = (e.clientX - mousePanStart.x) * mousePanSensitivity;\n    const deltaY = (e.clientY - mousePanStart.y) * mousePanSensitivity;\n    const scaledWidth = image.width * currentScale;\n    const scaledHeight = image.height * currentScale;\n    const slideWidth = gesture.slideWidth;\n    const slideHeight = gesture.slideHeight;\n    const minX = Math.min(slideWidth / 2 - scaledWidth / 2, 0);\n    const maxX = -minX;\n    const minY = Math.min(slideHeight / 2 - scaledHeight / 2, 0);\n    const maxY = -minY;\n    const newX = Math.max(Math.min(image.startX + deltaX, maxX), minX);\n    const newY = Math.max(Math.min(image.startY + deltaY, maxY), minY);\n    gesture.imageWrapEl.style.transitionDuration = '0ms';\n    gesture.imageWrapEl.style.transform = `translate3d(${newX}px, ${newY}px, 0)`;\n    mousePanStart.x = e.clientX;\n    mousePanStart.y = e.clientY;\n    image.startX = newX;\n    image.startY = newY;\n    image.currentX = newX;\n    image.currentY = newY;\n  }\n\n  function zoomIn(e) {\n    const zoom = swiper.zoom;\n    const params = swiper.params.zoom;\n\n    if (!gesture.slideEl) {\n      if (e && e.target) {\n        gesture.slideEl = e.target.closest(`.${swiper.params.slideClass}, swiper-slide`);\n      }\n\n      if (!gesture.slideEl) {\n        if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n          gesture.slideEl = elementChildren(swiper.slidesEl, `.${swiper.params.slideActiveClass}`)[0];\n        } else {\n          gesture.slideEl = swiper.slides[swiper.activeIndex];\n        }\n      }\n\n      let imageEl = gesture.slideEl.querySelector(`.${params.containerClass}`);\n\n      if (imageEl) {\n        imageEl = imageEl.querySelectorAll('picture, img, svg, canvas, .swiper-zoom-target')[0];\n      }\n\n      gesture.imageEl = imageEl;\n\n      if (imageEl) {\n        gesture.imageWrapEl = elementParents(gesture.imageEl, `.${params.containerClass}`)[0];\n      } else {\n        gesture.imageWrapEl = undefined;\n      }\n    }\n\n    if (!gesture.imageEl || !gesture.imageWrapEl) return;\n\n    if (swiper.params.cssMode) {\n      swiper.wrapperEl.style.overflow = 'hidden';\n      swiper.wrapperEl.style.touchAction = 'none';\n    }\n\n    gesture.slideEl.classList.add(`${params.zoomedSlideClass}`);\n    let touchX;\n    let touchY;\n    let offsetX;\n    let offsetY;\n    let diffX;\n    let diffY;\n    let translateX;\n    let translateY;\n    let imageWidth;\n    let imageHeight;\n    let scaledWidth;\n    let scaledHeight;\n    let translateMinX;\n    let translateMinY;\n    let translateMaxX;\n    let translateMaxY;\n    let slideWidth;\n    let slideHeight;\n\n    if (typeof image.touchesStart.x === 'undefined' && e) {\n      touchX = e.pageX;\n      touchY = e.pageY;\n    } else {\n      touchX = image.touchesStart.x;\n      touchY = image.touchesStart.y;\n    }\n\n    const prevScale = currentScale;\n    const forceZoomRatio = typeof e === 'number' ? e : null;\n\n    if (currentScale === 1 && forceZoomRatio) {\n      touchX = undefined;\n      touchY = undefined;\n      image.touchesStart.x = undefined;\n      image.touchesStart.y = undefined;\n    }\n\n    const maxRatio = getMaxRatio();\n    zoom.scale = forceZoomRatio || maxRatio;\n    currentScale = forceZoomRatio || maxRatio;\n\n    if (e && !(currentScale === 1 && forceZoomRatio)) {\n      slideWidth = gesture.slideEl.offsetWidth;\n      slideHeight = gesture.slideEl.offsetHeight;\n      offsetX = elementOffset(gesture.slideEl).left + window.scrollX;\n      offsetY = elementOffset(gesture.slideEl).top + window.scrollY;\n      diffX = offsetX + slideWidth / 2 - touchX;\n      diffY = offsetY + slideHeight / 2 - touchY;\n      imageWidth = gesture.imageEl.offsetWidth || gesture.imageEl.clientWidth;\n      imageHeight = gesture.imageEl.offsetHeight || gesture.imageEl.clientHeight;\n      scaledWidth = imageWidth * zoom.scale;\n      scaledHeight = imageHeight * zoom.scale;\n      translateMinX = Math.min(slideWidth / 2 - scaledWidth / 2, 0);\n      translateMinY = Math.min(slideHeight / 2 - scaledHeight / 2, 0);\n      translateMaxX = -translateMinX;\n      translateMaxY = -translateMinY;\n\n      if (prevScale > 0 && forceZoomRatio && typeof image.currentX === 'number' && typeof image.currentY === 'number') {\n        translateX = image.currentX * zoom.scale / prevScale;\n        translateY = image.currentY * zoom.scale / prevScale;\n      } else {\n        translateX = diffX * zoom.scale;\n        translateY = diffY * zoom.scale;\n      }\n\n      if (translateX < translateMinX) {\n        translateX = translateMinX;\n      }\n\n      if (translateX > translateMaxX) {\n        translateX = translateMaxX;\n      }\n\n      if (translateY < translateMinY) {\n        translateY = translateMinY;\n      }\n\n      if (translateY > translateMaxY) {\n        translateY = translateMaxY;\n      }\n    } else {\n      translateX = 0;\n      translateY = 0;\n    }\n\n    if (forceZoomRatio && zoom.scale === 1) {\n      gesture.originX = 0;\n      gesture.originY = 0;\n    }\n\n    image.currentX = translateX;\n    image.currentY = translateY;\n    gesture.imageWrapEl.style.transitionDuration = '300ms';\n    gesture.imageWrapEl.style.transform = `translate3d(${translateX}px, ${translateY}px,0)`;\n    gesture.imageEl.style.transitionDuration = '300ms';\n    gesture.imageEl.style.transform = `translate3d(0,0,0) scale(${zoom.scale})`;\n  }\n\n  function zoomOut() {\n    const zoom = swiper.zoom;\n    const params = swiper.params.zoom;\n\n    if (!gesture.slideEl) {\n      if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n        gesture.slideEl = elementChildren(swiper.slidesEl, `.${swiper.params.slideActiveClass}`)[0];\n      } else {\n        gesture.slideEl = swiper.slides[swiper.activeIndex];\n      }\n\n      let imageEl = gesture.slideEl.querySelector(`.${params.containerClass}`);\n\n      if (imageEl) {\n        imageEl = imageEl.querySelectorAll('picture, img, svg, canvas, .swiper-zoom-target')[0];\n      }\n\n      gesture.imageEl = imageEl;\n\n      if (imageEl) {\n        gesture.imageWrapEl = elementParents(gesture.imageEl, `.${params.containerClass}`)[0];\n      } else {\n        gesture.imageWrapEl = undefined;\n      }\n    }\n\n    if (!gesture.imageEl || !gesture.imageWrapEl) return;\n\n    if (swiper.params.cssMode) {\n      swiper.wrapperEl.style.overflow = '';\n      swiper.wrapperEl.style.touchAction = '';\n    }\n\n    zoom.scale = 1;\n    currentScale = 1;\n    image.currentX = undefined;\n    image.currentY = undefined;\n    image.touchesStart.x = undefined;\n    image.touchesStart.y = undefined;\n    gesture.imageWrapEl.style.transitionDuration = '300ms';\n    gesture.imageWrapEl.style.transform = 'translate3d(0,0,0)';\n    gesture.imageEl.style.transitionDuration = '300ms';\n    gesture.imageEl.style.transform = 'translate3d(0,0,0) scale(1)';\n    gesture.slideEl.classList.remove(`${params.zoomedSlideClass}`);\n    gesture.slideEl = undefined;\n    gesture.originX = 0;\n    gesture.originY = 0;\n\n    if (swiper.params.zoom.panOnMouseMove) {\n      mousePanStart = {\n        x: 0,\n        y: 0\n      };\n\n      if (isPanningWithMouse) {\n        isPanningWithMouse = false;\n        image.startX = 0;\n        image.startY = 0;\n      }\n    }\n  } // Toggle Zoom\n\n\n  function zoomToggle(e) {\n    const zoom = swiper.zoom;\n\n    if (zoom.scale && zoom.scale !== 1) {\n      // Zoom Out\n      zoomOut();\n    } else {\n      // Zoom In\n      zoomIn(e);\n    }\n  }\n\n  function getListeners() {\n    const passiveListener = swiper.params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    const activeListenerWithCapture = swiper.params.passiveListeners ? {\n      passive: false,\n      capture: true\n    } : true;\n    return {\n      passiveListener,\n      activeListenerWithCapture\n    };\n  } // Attach/Detach Events\n\n\n  function enable() {\n    const zoom = swiper.zoom;\n    if (zoom.enabled) return;\n    zoom.enabled = true;\n    const {\n      passiveListener,\n      activeListenerWithCapture\n    } = getListeners(); // Scale image\n\n    swiper.wrapperEl.addEventListener('pointerdown', onGestureStart, passiveListener);\n    swiper.wrapperEl.addEventListener('pointermove', onGestureChange, activeListenerWithCapture);\n    ['pointerup', 'pointercancel', 'pointerout'].forEach(eventName => {\n      swiper.wrapperEl.addEventListener(eventName, onGestureEnd, passiveListener);\n    }); // Move image\n\n    swiper.wrapperEl.addEventListener('pointermove', onTouchMove, activeListenerWithCapture);\n  }\n\n  function disable() {\n    const zoom = swiper.zoom;\n    if (!zoom.enabled) return;\n    zoom.enabled = false;\n    const {\n      passiveListener,\n      activeListenerWithCapture\n    } = getListeners(); // Scale image\n\n    swiper.wrapperEl.removeEventListener('pointerdown', onGestureStart, passiveListener);\n    swiper.wrapperEl.removeEventListener('pointermove', onGestureChange, activeListenerWithCapture);\n    ['pointerup', 'pointercancel', 'pointerout'].forEach(eventName => {\n      swiper.wrapperEl.removeEventListener(eventName, onGestureEnd, passiveListener);\n    }); // Move image\n\n    swiper.wrapperEl.removeEventListener('pointermove', onTouchMove, activeListenerWithCapture);\n  }\n\n  on('init', () => {\n    if (swiper.params.zoom.enabled) {\n      enable();\n    }\n  });\n  on('destroy', () => {\n    disable();\n  });\n  on('touchStart', (_s, e) => {\n    if (!swiper.zoom.enabled) return;\n    onTouchStart(e);\n  });\n  on('touchEnd', (_s, e) => {\n    if (!swiper.zoom.enabled) return;\n    onTouchEnd();\n  });\n  on('doubleTap', (_s, e) => {\n    if (!swiper.animating && swiper.params.zoom.enabled && swiper.zoom.enabled && swiper.params.zoom.toggle) {\n      zoomToggle(e);\n    }\n  });\n  on('transitionEnd', () => {\n    if (swiper.zoom.enabled && swiper.params.zoom.enabled) {\n      onTransitionEnd();\n    }\n  });\n  on('slideChange', () => {\n    if (swiper.zoom.enabled && swiper.params.zoom.enabled && swiper.params.cssMode) {\n      onTransitionEnd();\n    }\n  });\n  Object.assign(swiper.zoom, {\n    enable,\n    disable,\n    in: zoomIn,\n    out: zoomOut,\n    toggle: zoomToggle\n  });\n}\n\nexport { Zoom as default };","map":{"version":3,"names":["a","getWindow","e","elementChildren","elementParents","b","elementOffset","j","getTranslate","Zoom","_ref","swiper","extendParams","on","emit","window","zoom","enabled","limitToOriginalSize","maxRatio","minRatio","panOnMouseMove","toggle","containerClass","zoomedSlideClass","currentScale","isScaling","isPanningWithMouse","mousePanStart","x","y","mousePanSensitivity","fakeGestureTouched","fakeGestureMoved","evCache","gesture","originX","originY","slideEl","undefined","slideWidth","slideHeight","imageEl","imageWrapEl","image","isTouched","isMoved","currentX","currentY","minX","minY","maxX","maxY","width","height","startX","startY","touchesStart","touchesCurrent","velocity","prevPositionX","prevPositionY","prevTime","scale","Object","defineProperty","get","set","value","getDistanceBetweenTouches","length","x1","pageX","y1","pageY","x2","y2","distance","Math","sqrt","getMaxRatio","params","getAttribute","naturalWidth","imageMaxRatio","offsetWidth","min","getScaleOrigin","box","getBoundingClientRect","scrollX","scrollY","getSlideSelector","isElement","slideClass","eventWithinSlide","slideSelector","target","matches","slides","filter","contains","eventWithinZoomContainer","selector","hostEl","querySelectorAll","containerEl","onGestureStart","pointerType","splice","push","scaleStart","closest","activeIndex","querySelector","style","transitionDuration","onGestureChange","pointerIndex","findIndex","cachedEv","pointerId","scaleMove","transform","onGestureEnd","type","max","speed","classList","add","remove","allowTouchMoveTimeout","allowTouchMove","touchEventsData","preventTouchMoveFromPointerMove","preventTouchMove","clearTimeout","setTimeout","destroyed","onTouchStart","device","android","cancelable","preventDefault","event","onTouchMove","isMouseEvent","isMousePan","onMouseMove","clientWidth","offsetHeight","clientHeight","scaledWidth","scaledHeight","touchesDiff","abs","allowClick","isHorizontal","floor","stopPropagation","scaleRatio","Date","now","onTouchEnd","momentumDurationX","momentumDurationY","momentumDistanceX","newPositionX","momentumDistanceY","newPositionY","momentumDuration","onTransitionEnd","indexOf","currentTransform","getComputedStyle","matrix","DOMMatrix","clientX","clientY","f","deltaX","deltaY","newX","newY","zoomIn","virtual","slidesEl","slideActiveClass","cssMode","wrapperEl","overflow","touchAction","touchX","touchY","offsetX","offsetY","diffX","diffY","translateX","translateY","imageWidth","imageHeight","translateMinX","translateMinY","translateMaxX","translateMaxY","prevScale","forceZoomRatio","left","top","zoomOut","zoomToggle","getListeners","passiveListener","passiveListeners","passive","capture","activeListenerWithCapture","enable","addEventListener","forEach","eventName","disable","removeEventListener","_s","animating","assign","in","out","default"],"sources":["C:/Users/memen/Desktop/2_FP/Prog Multimedia y Disp Moviles/Tareas/PMDM05_TaEv01/node_modules/swiper/modules/zoom.mjs"],"sourcesContent":["import { a as getWindow } from '../shared/ssr-window.esm.mjs';\nimport { e as elementChildren, a as elementParents, b as elementOffset, j as getTranslate } from '../shared/utils.mjs';\n\nfunction Zoom(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  const window = getWindow();\n  extendParams({\n    zoom: {\n      enabled: false,\n      limitToOriginalSize: false,\n      maxRatio: 3,\n      minRatio: 1,\n      panOnMouseMove: false,\n      toggle: true,\n      containerClass: 'swiper-zoom-container',\n      zoomedSlideClass: 'swiper-slide-zoomed'\n    }\n  });\n  swiper.zoom = {\n    enabled: false\n  };\n  let currentScale = 1;\n  let isScaling = false;\n  let isPanningWithMouse = false;\n  let mousePanStart = {\n    x: 0,\n    y: 0\n  };\n  const mousePanSensitivity = -3; // Negative to invert pan direction\n  let fakeGestureTouched;\n  let fakeGestureMoved;\n  const evCache = [];\n  const gesture = {\n    originX: 0,\n    originY: 0,\n    slideEl: undefined,\n    slideWidth: undefined,\n    slideHeight: undefined,\n    imageEl: undefined,\n    imageWrapEl: undefined,\n    maxRatio: 3\n  };\n  const image = {\n    isTouched: undefined,\n    isMoved: undefined,\n    currentX: undefined,\n    currentY: undefined,\n    minX: undefined,\n    minY: undefined,\n    maxX: undefined,\n    maxY: undefined,\n    width: undefined,\n    height: undefined,\n    startX: undefined,\n    startY: undefined,\n    touchesStart: {},\n    touchesCurrent: {}\n  };\n  const velocity = {\n    x: undefined,\n    y: undefined,\n    prevPositionX: undefined,\n    prevPositionY: undefined,\n    prevTime: undefined\n  };\n  let scale = 1;\n  Object.defineProperty(swiper.zoom, 'scale', {\n    get() {\n      return scale;\n    },\n    set(value) {\n      if (scale !== value) {\n        const imageEl = gesture.imageEl;\n        const slideEl = gesture.slideEl;\n        emit('zoomChange', value, imageEl, slideEl);\n      }\n      scale = value;\n    }\n  });\n  function getDistanceBetweenTouches() {\n    if (evCache.length < 2) return 1;\n    const x1 = evCache[0].pageX;\n    const y1 = evCache[0].pageY;\n    const x2 = evCache[1].pageX;\n    const y2 = evCache[1].pageY;\n    const distance = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);\n    return distance;\n  }\n  function getMaxRatio() {\n    const params = swiper.params.zoom;\n    const maxRatio = gesture.imageWrapEl.getAttribute('data-swiper-zoom') || params.maxRatio;\n    if (params.limitToOriginalSize && gesture.imageEl && gesture.imageEl.naturalWidth) {\n      const imageMaxRatio = gesture.imageEl.naturalWidth / gesture.imageEl.offsetWidth;\n      return Math.min(imageMaxRatio, maxRatio);\n    }\n    return maxRatio;\n  }\n  function getScaleOrigin() {\n    if (evCache.length < 2) return {\n      x: null,\n      y: null\n    };\n    const box = gesture.imageEl.getBoundingClientRect();\n    return [(evCache[0].pageX + (evCache[1].pageX - evCache[0].pageX) / 2 - box.x - window.scrollX) / currentScale, (evCache[0].pageY + (evCache[1].pageY - evCache[0].pageY) / 2 - box.y - window.scrollY) / currentScale];\n  }\n  function getSlideSelector() {\n    return swiper.isElement ? `swiper-slide` : `.${swiper.params.slideClass}`;\n  }\n  function eventWithinSlide(e) {\n    const slideSelector = getSlideSelector();\n    if (e.target.matches(slideSelector)) return true;\n    if (swiper.slides.filter(slideEl => slideEl.contains(e.target)).length > 0) return true;\n    return false;\n  }\n  function eventWithinZoomContainer(e) {\n    const selector = `.${swiper.params.zoom.containerClass}`;\n    if (e.target.matches(selector)) return true;\n    if ([...swiper.hostEl.querySelectorAll(selector)].filter(containerEl => containerEl.contains(e.target)).length > 0) return true;\n    return false;\n  }\n\n  // Events\n  function onGestureStart(e) {\n    if (e.pointerType === 'mouse') {\n      evCache.splice(0, evCache.length);\n    }\n    if (!eventWithinSlide(e)) return;\n    const params = swiper.params.zoom;\n    fakeGestureTouched = false;\n    fakeGestureMoved = false;\n    evCache.push(e);\n    if (evCache.length < 2) {\n      return;\n    }\n    fakeGestureTouched = true;\n    gesture.scaleStart = getDistanceBetweenTouches();\n    if (!gesture.slideEl) {\n      gesture.slideEl = e.target.closest(`.${swiper.params.slideClass}, swiper-slide`);\n      if (!gesture.slideEl) gesture.slideEl = swiper.slides[swiper.activeIndex];\n      let imageEl = gesture.slideEl.querySelector(`.${params.containerClass}`);\n      if (imageEl) {\n        imageEl = imageEl.querySelectorAll('picture, img, svg, canvas, .swiper-zoom-target')[0];\n      }\n      gesture.imageEl = imageEl;\n      if (imageEl) {\n        gesture.imageWrapEl = elementParents(gesture.imageEl, `.${params.containerClass}`)[0];\n      } else {\n        gesture.imageWrapEl = undefined;\n      }\n      if (!gesture.imageWrapEl) {\n        gesture.imageEl = undefined;\n        return;\n      }\n      gesture.maxRatio = getMaxRatio();\n    }\n    if (gesture.imageEl) {\n      const [originX, originY] = getScaleOrigin();\n      gesture.originX = originX;\n      gesture.originY = originY;\n      gesture.imageEl.style.transitionDuration = '0ms';\n    }\n    isScaling = true;\n  }\n  function onGestureChange(e) {\n    if (!eventWithinSlide(e)) return;\n    const params = swiper.params.zoom;\n    const zoom = swiper.zoom;\n    const pointerIndex = evCache.findIndex(cachedEv => cachedEv.pointerId === e.pointerId);\n    if (pointerIndex >= 0) evCache[pointerIndex] = e;\n    if (evCache.length < 2) {\n      return;\n    }\n    fakeGestureMoved = true;\n    gesture.scaleMove = getDistanceBetweenTouches();\n    if (!gesture.imageEl) {\n      return;\n    }\n    zoom.scale = gesture.scaleMove / gesture.scaleStart * currentScale;\n    if (zoom.scale > gesture.maxRatio) {\n      zoom.scale = gesture.maxRatio - 1 + (zoom.scale - gesture.maxRatio + 1) ** 0.5;\n    }\n    if (zoom.scale < params.minRatio) {\n      zoom.scale = params.minRatio + 1 - (params.minRatio - zoom.scale + 1) ** 0.5;\n    }\n    gesture.imageEl.style.transform = `translate3d(0,0,0) scale(${zoom.scale})`;\n  }\n  function onGestureEnd(e) {\n    if (!eventWithinSlide(e)) return;\n    if (e.pointerType === 'mouse' && e.type === 'pointerout') return;\n    const params = swiper.params.zoom;\n    const zoom = swiper.zoom;\n    const pointerIndex = evCache.findIndex(cachedEv => cachedEv.pointerId === e.pointerId);\n    if (pointerIndex >= 0) evCache.splice(pointerIndex, 1);\n    if (!fakeGestureTouched || !fakeGestureMoved) {\n      return;\n    }\n    fakeGestureTouched = false;\n    fakeGestureMoved = false;\n    if (!gesture.imageEl) return;\n    zoom.scale = Math.max(Math.min(zoom.scale, gesture.maxRatio), params.minRatio);\n    gesture.imageEl.style.transitionDuration = `${swiper.params.speed}ms`;\n    gesture.imageEl.style.transform = `translate3d(0,0,0) scale(${zoom.scale})`;\n    currentScale = zoom.scale;\n    isScaling = false;\n    if (zoom.scale > 1 && gesture.slideEl) {\n      gesture.slideEl.classList.add(`${params.zoomedSlideClass}`);\n    } else if (zoom.scale <= 1 && gesture.slideEl) {\n      gesture.slideEl.classList.remove(`${params.zoomedSlideClass}`);\n    }\n    if (zoom.scale === 1) {\n      gesture.originX = 0;\n      gesture.originY = 0;\n      gesture.slideEl = undefined;\n    }\n  }\n  let allowTouchMoveTimeout;\n  function allowTouchMove() {\n    swiper.touchEventsData.preventTouchMoveFromPointerMove = false;\n  }\n  function preventTouchMove() {\n    clearTimeout(allowTouchMoveTimeout);\n    swiper.touchEventsData.preventTouchMoveFromPointerMove = true;\n    allowTouchMoveTimeout = setTimeout(() => {\n      if (swiper.destroyed) return;\n      allowTouchMove();\n    });\n  }\n  function onTouchStart(e) {\n    const device = swiper.device;\n    if (!gesture.imageEl) return;\n    if (image.isTouched) return;\n    if (device.android && e.cancelable) e.preventDefault();\n    image.isTouched = true;\n    const event = evCache.length > 0 ? evCache[0] : e;\n    image.touchesStart.x = event.pageX;\n    image.touchesStart.y = event.pageY;\n  }\n  function onTouchMove(e) {\n    const isMouseEvent = e.pointerType === 'mouse';\n    const isMousePan = isMouseEvent && swiper.params.zoom.panOnMouseMove;\n    if (!eventWithinSlide(e) || !eventWithinZoomContainer(e)) {\n      return;\n    }\n    const zoom = swiper.zoom;\n    if (!gesture.imageEl) {\n      return;\n    }\n    if (!image.isTouched || !gesture.slideEl) {\n      if (isMousePan) onMouseMove(e);\n      return;\n    }\n    if (isMousePan) {\n      onMouseMove(e);\n      return;\n    }\n    if (!image.isMoved) {\n      image.width = gesture.imageEl.offsetWidth || gesture.imageEl.clientWidth;\n      image.height = gesture.imageEl.offsetHeight || gesture.imageEl.clientHeight;\n      image.startX = getTranslate(gesture.imageWrapEl, 'x') || 0;\n      image.startY = getTranslate(gesture.imageWrapEl, 'y') || 0;\n      gesture.slideWidth = gesture.slideEl.offsetWidth;\n      gesture.slideHeight = gesture.slideEl.offsetHeight;\n      gesture.imageWrapEl.style.transitionDuration = '0ms';\n    }\n    // Define if we need image drag\n    const scaledWidth = image.width * zoom.scale;\n    const scaledHeight = image.height * zoom.scale;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.touchesCurrent.x = evCache.length > 0 ? evCache[0].pageX : e.pageX;\n    image.touchesCurrent.y = evCache.length > 0 ? evCache[0].pageY : e.pageY;\n    const touchesDiff = Math.max(Math.abs(image.touchesCurrent.x - image.touchesStart.x), Math.abs(image.touchesCurrent.y - image.touchesStart.y));\n    if (touchesDiff > 5) {\n      swiper.allowClick = false;\n    }\n    if (!image.isMoved && !isScaling) {\n      if (swiper.isHorizontal() && (Math.floor(image.minX) === Math.floor(image.startX) && image.touchesCurrent.x < image.touchesStart.x || Math.floor(image.maxX) === Math.floor(image.startX) && image.touchesCurrent.x > image.touchesStart.x)) {\n        image.isTouched = false;\n        allowTouchMove();\n        return;\n      }\n      if (!swiper.isHorizontal() && (Math.floor(image.minY) === Math.floor(image.startY) && image.touchesCurrent.y < image.touchesStart.y || Math.floor(image.maxY) === Math.floor(image.startY) && image.touchesCurrent.y > image.touchesStart.y)) {\n        image.isTouched = false;\n        allowTouchMove();\n        return;\n      }\n    }\n    if (e.cancelable) {\n      e.preventDefault();\n    }\n    e.stopPropagation();\n    preventTouchMove();\n    image.isMoved = true;\n    const scaleRatio = (zoom.scale - currentScale) / (gesture.maxRatio - swiper.params.zoom.minRatio);\n    const {\n      originX,\n      originY\n    } = gesture;\n    image.currentX = image.touchesCurrent.x - image.touchesStart.x + image.startX + scaleRatio * (image.width - originX * 2);\n    image.currentY = image.touchesCurrent.y - image.touchesStart.y + image.startY + scaleRatio * (image.height - originY * 2);\n    if (image.currentX < image.minX) {\n      image.currentX = image.minX + 1 - (image.minX - image.currentX + 1) ** 0.8;\n    }\n    if (image.currentX > image.maxX) {\n      image.currentX = image.maxX - 1 + (image.currentX - image.maxX + 1) ** 0.8;\n    }\n    if (image.currentY < image.minY) {\n      image.currentY = image.minY + 1 - (image.minY - image.currentY + 1) ** 0.8;\n    }\n    if (image.currentY > image.maxY) {\n      image.currentY = image.maxY - 1 + (image.currentY - image.maxY + 1) ** 0.8;\n    }\n\n    // Velocity\n    if (!velocity.prevPositionX) velocity.prevPositionX = image.touchesCurrent.x;\n    if (!velocity.prevPositionY) velocity.prevPositionY = image.touchesCurrent.y;\n    if (!velocity.prevTime) velocity.prevTime = Date.now();\n    velocity.x = (image.touchesCurrent.x - velocity.prevPositionX) / (Date.now() - velocity.prevTime) / 2;\n    velocity.y = (image.touchesCurrent.y - velocity.prevPositionY) / (Date.now() - velocity.prevTime) / 2;\n    if (Math.abs(image.touchesCurrent.x - velocity.prevPositionX) < 2) velocity.x = 0;\n    if (Math.abs(image.touchesCurrent.y - velocity.prevPositionY) < 2) velocity.y = 0;\n    velocity.prevPositionX = image.touchesCurrent.x;\n    velocity.prevPositionY = image.touchesCurrent.y;\n    velocity.prevTime = Date.now();\n    gesture.imageWrapEl.style.transform = `translate3d(${image.currentX}px, ${image.currentY}px,0)`;\n  }\n  function onTouchEnd() {\n    const zoom = swiper.zoom;\n    evCache.length = 0;\n    if (!gesture.imageEl) return;\n    if (!image.isTouched || !image.isMoved) {\n      image.isTouched = false;\n      image.isMoved = false;\n      return;\n    }\n    image.isTouched = false;\n    image.isMoved = false;\n    let momentumDurationX = 300;\n    let momentumDurationY = 300;\n    const momentumDistanceX = velocity.x * momentumDurationX;\n    const newPositionX = image.currentX + momentumDistanceX;\n    const momentumDistanceY = velocity.y * momentumDurationY;\n    const newPositionY = image.currentY + momentumDistanceY;\n\n    // Fix duration\n    if (velocity.x !== 0) momentumDurationX = Math.abs((newPositionX - image.currentX) / velocity.x);\n    if (velocity.y !== 0) momentumDurationY = Math.abs((newPositionY - image.currentY) / velocity.y);\n    const momentumDuration = Math.max(momentumDurationX, momentumDurationY);\n    image.currentX = newPositionX;\n    image.currentY = newPositionY;\n    // Define if we need image drag\n    const scaledWidth = image.width * zoom.scale;\n    const scaledHeight = image.height * zoom.scale;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.currentX = Math.max(Math.min(image.currentX, image.maxX), image.minX);\n    image.currentY = Math.max(Math.min(image.currentY, image.maxY), image.minY);\n    gesture.imageWrapEl.style.transitionDuration = `${momentumDuration}ms`;\n    gesture.imageWrapEl.style.transform = `translate3d(${image.currentX}px, ${image.currentY}px,0)`;\n  }\n  function onTransitionEnd() {\n    const zoom = swiper.zoom;\n    if (gesture.slideEl && swiper.activeIndex !== swiper.slides.indexOf(gesture.slideEl)) {\n      if (gesture.imageEl) {\n        gesture.imageEl.style.transform = 'translate3d(0,0,0) scale(1)';\n      }\n      if (gesture.imageWrapEl) {\n        gesture.imageWrapEl.style.transform = 'translate3d(0,0,0)';\n      }\n      gesture.slideEl.classList.remove(`${swiper.params.zoom.zoomedSlideClass}`);\n      zoom.scale = 1;\n      currentScale = 1;\n      gesture.slideEl = undefined;\n      gesture.imageEl = undefined;\n      gesture.imageWrapEl = undefined;\n      gesture.originX = 0;\n      gesture.originY = 0;\n    }\n  }\n  function onMouseMove(e) {\n    // Only pan if zoomed in and mouse panning is enabled\n    if (currentScale <= 1 || !gesture.imageWrapEl) return;\n    if (!eventWithinSlide(e) || !eventWithinZoomContainer(e)) return;\n    const currentTransform = window.getComputedStyle(gesture.imageWrapEl).transform;\n    const matrix = new window.DOMMatrix(currentTransform);\n    if (!isPanningWithMouse) {\n      isPanningWithMouse = true;\n      mousePanStart.x = e.clientX;\n      mousePanStart.y = e.clientY;\n      image.startX = matrix.e;\n      image.startY = matrix.f;\n      image.width = gesture.imageEl.offsetWidth || gesture.imageEl.clientWidth;\n      image.height = gesture.imageEl.offsetHeight || gesture.imageEl.clientHeight;\n      gesture.slideWidth = gesture.slideEl.offsetWidth;\n      gesture.slideHeight = gesture.slideEl.offsetHeight;\n      return;\n    }\n    const deltaX = (e.clientX - mousePanStart.x) * mousePanSensitivity;\n    const deltaY = (e.clientY - mousePanStart.y) * mousePanSensitivity;\n    const scaledWidth = image.width * currentScale;\n    const scaledHeight = image.height * currentScale;\n    const slideWidth = gesture.slideWidth;\n    const slideHeight = gesture.slideHeight;\n    const minX = Math.min(slideWidth / 2 - scaledWidth / 2, 0);\n    const maxX = -minX;\n    const minY = Math.min(slideHeight / 2 - scaledHeight / 2, 0);\n    const maxY = -minY;\n    const newX = Math.max(Math.min(image.startX + deltaX, maxX), minX);\n    const newY = Math.max(Math.min(image.startY + deltaY, maxY), minY);\n    gesture.imageWrapEl.style.transitionDuration = '0ms';\n    gesture.imageWrapEl.style.transform = `translate3d(${newX}px, ${newY}px, 0)`;\n    mousePanStart.x = e.clientX;\n    mousePanStart.y = e.clientY;\n    image.startX = newX;\n    image.startY = newY;\n    image.currentX = newX;\n    image.currentY = newY;\n  }\n  function zoomIn(e) {\n    const zoom = swiper.zoom;\n    const params = swiper.params.zoom;\n    if (!gesture.slideEl) {\n      if (e && e.target) {\n        gesture.slideEl = e.target.closest(`.${swiper.params.slideClass}, swiper-slide`);\n      }\n      if (!gesture.slideEl) {\n        if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n          gesture.slideEl = elementChildren(swiper.slidesEl, `.${swiper.params.slideActiveClass}`)[0];\n        } else {\n          gesture.slideEl = swiper.slides[swiper.activeIndex];\n        }\n      }\n      let imageEl = gesture.slideEl.querySelector(`.${params.containerClass}`);\n      if (imageEl) {\n        imageEl = imageEl.querySelectorAll('picture, img, svg, canvas, .swiper-zoom-target')[0];\n      }\n      gesture.imageEl = imageEl;\n      if (imageEl) {\n        gesture.imageWrapEl = elementParents(gesture.imageEl, `.${params.containerClass}`)[0];\n      } else {\n        gesture.imageWrapEl = undefined;\n      }\n    }\n    if (!gesture.imageEl || !gesture.imageWrapEl) return;\n    if (swiper.params.cssMode) {\n      swiper.wrapperEl.style.overflow = 'hidden';\n      swiper.wrapperEl.style.touchAction = 'none';\n    }\n    gesture.slideEl.classList.add(`${params.zoomedSlideClass}`);\n    let touchX;\n    let touchY;\n    let offsetX;\n    let offsetY;\n    let diffX;\n    let diffY;\n    let translateX;\n    let translateY;\n    let imageWidth;\n    let imageHeight;\n    let scaledWidth;\n    let scaledHeight;\n    let translateMinX;\n    let translateMinY;\n    let translateMaxX;\n    let translateMaxY;\n    let slideWidth;\n    let slideHeight;\n    if (typeof image.touchesStart.x === 'undefined' && e) {\n      touchX = e.pageX;\n      touchY = e.pageY;\n    } else {\n      touchX = image.touchesStart.x;\n      touchY = image.touchesStart.y;\n    }\n    const prevScale = currentScale;\n    const forceZoomRatio = typeof e === 'number' ? e : null;\n    if (currentScale === 1 && forceZoomRatio) {\n      touchX = undefined;\n      touchY = undefined;\n      image.touchesStart.x = undefined;\n      image.touchesStart.y = undefined;\n    }\n    const maxRatio = getMaxRatio();\n    zoom.scale = forceZoomRatio || maxRatio;\n    currentScale = forceZoomRatio || maxRatio;\n    if (e && !(currentScale === 1 && forceZoomRatio)) {\n      slideWidth = gesture.slideEl.offsetWidth;\n      slideHeight = gesture.slideEl.offsetHeight;\n      offsetX = elementOffset(gesture.slideEl).left + window.scrollX;\n      offsetY = elementOffset(gesture.slideEl).top + window.scrollY;\n      diffX = offsetX + slideWidth / 2 - touchX;\n      diffY = offsetY + slideHeight / 2 - touchY;\n      imageWidth = gesture.imageEl.offsetWidth || gesture.imageEl.clientWidth;\n      imageHeight = gesture.imageEl.offsetHeight || gesture.imageEl.clientHeight;\n      scaledWidth = imageWidth * zoom.scale;\n      scaledHeight = imageHeight * zoom.scale;\n      translateMinX = Math.min(slideWidth / 2 - scaledWidth / 2, 0);\n      translateMinY = Math.min(slideHeight / 2 - scaledHeight / 2, 0);\n      translateMaxX = -translateMinX;\n      translateMaxY = -translateMinY;\n      if (prevScale > 0 && forceZoomRatio && typeof image.currentX === 'number' && typeof image.currentY === 'number') {\n        translateX = image.currentX * zoom.scale / prevScale;\n        translateY = image.currentY * zoom.scale / prevScale;\n      } else {\n        translateX = diffX * zoom.scale;\n        translateY = diffY * zoom.scale;\n      }\n      if (translateX < translateMinX) {\n        translateX = translateMinX;\n      }\n      if (translateX > translateMaxX) {\n        translateX = translateMaxX;\n      }\n      if (translateY < translateMinY) {\n        translateY = translateMinY;\n      }\n      if (translateY > translateMaxY) {\n        translateY = translateMaxY;\n      }\n    } else {\n      translateX = 0;\n      translateY = 0;\n    }\n    if (forceZoomRatio && zoom.scale === 1) {\n      gesture.originX = 0;\n      gesture.originY = 0;\n    }\n    image.currentX = translateX;\n    image.currentY = translateY;\n    gesture.imageWrapEl.style.transitionDuration = '300ms';\n    gesture.imageWrapEl.style.transform = `translate3d(${translateX}px, ${translateY}px,0)`;\n    gesture.imageEl.style.transitionDuration = '300ms';\n    gesture.imageEl.style.transform = `translate3d(0,0,0) scale(${zoom.scale})`;\n  }\n  function zoomOut() {\n    const zoom = swiper.zoom;\n    const params = swiper.params.zoom;\n    if (!gesture.slideEl) {\n      if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n        gesture.slideEl = elementChildren(swiper.slidesEl, `.${swiper.params.slideActiveClass}`)[0];\n      } else {\n        gesture.slideEl = swiper.slides[swiper.activeIndex];\n      }\n      let imageEl = gesture.slideEl.querySelector(`.${params.containerClass}`);\n      if (imageEl) {\n        imageEl = imageEl.querySelectorAll('picture, img, svg, canvas, .swiper-zoom-target')[0];\n      }\n      gesture.imageEl = imageEl;\n      if (imageEl) {\n        gesture.imageWrapEl = elementParents(gesture.imageEl, `.${params.containerClass}`)[0];\n      } else {\n        gesture.imageWrapEl = undefined;\n      }\n    }\n    if (!gesture.imageEl || !gesture.imageWrapEl) return;\n    if (swiper.params.cssMode) {\n      swiper.wrapperEl.style.overflow = '';\n      swiper.wrapperEl.style.touchAction = '';\n    }\n    zoom.scale = 1;\n    currentScale = 1;\n    image.currentX = undefined;\n    image.currentY = undefined;\n    image.touchesStart.x = undefined;\n    image.touchesStart.y = undefined;\n    gesture.imageWrapEl.style.transitionDuration = '300ms';\n    gesture.imageWrapEl.style.transform = 'translate3d(0,0,0)';\n    gesture.imageEl.style.transitionDuration = '300ms';\n    gesture.imageEl.style.transform = 'translate3d(0,0,0) scale(1)';\n    gesture.slideEl.classList.remove(`${params.zoomedSlideClass}`);\n    gesture.slideEl = undefined;\n    gesture.originX = 0;\n    gesture.originY = 0;\n    if (swiper.params.zoom.panOnMouseMove) {\n      mousePanStart = {\n        x: 0,\n        y: 0\n      };\n      if (isPanningWithMouse) {\n        isPanningWithMouse = false;\n        image.startX = 0;\n        image.startY = 0;\n      }\n    }\n  }\n\n  // Toggle Zoom\n  function zoomToggle(e) {\n    const zoom = swiper.zoom;\n    if (zoom.scale && zoom.scale !== 1) {\n      // Zoom Out\n      zoomOut();\n    } else {\n      // Zoom In\n      zoomIn(e);\n    }\n  }\n  function getListeners() {\n    const passiveListener = swiper.params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    const activeListenerWithCapture = swiper.params.passiveListeners ? {\n      passive: false,\n      capture: true\n    } : true;\n    return {\n      passiveListener,\n      activeListenerWithCapture\n    };\n  }\n\n  // Attach/Detach Events\n  function enable() {\n    const zoom = swiper.zoom;\n    if (zoom.enabled) return;\n    zoom.enabled = true;\n    const {\n      passiveListener,\n      activeListenerWithCapture\n    } = getListeners();\n\n    // Scale image\n    swiper.wrapperEl.addEventListener('pointerdown', onGestureStart, passiveListener);\n    swiper.wrapperEl.addEventListener('pointermove', onGestureChange, activeListenerWithCapture);\n    ['pointerup', 'pointercancel', 'pointerout'].forEach(eventName => {\n      swiper.wrapperEl.addEventListener(eventName, onGestureEnd, passiveListener);\n    });\n\n    // Move image\n    swiper.wrapperEl.addEventListener('pointermove', onTouchMove, activeListenerWithCapture);\n  }\n  function disable() {\n    const zoom = swiper.zoom;\n    if (!zoom.enabled) return;\n    zoom.enabled = false;\n    const {\n      passiveListener,\n      activeListenerWithCapture\n    } = getListeners();\n\n    // Scale image\n    swiper.wrapperEl.removeEventListener('pointerdown', onGestureStart, passiveListener);\n    swiper.wrapperEl.removeEventListener('pointermove', onGestureChange, activeListenerWithCapture);\n    ['pointerup', 'pointercancel', 'pointerout'].forEach(eventName => {\n      swiper.wrapperEl.removeEventListener(eventName, onGestureEnd, passiveListener);\n    });\n\n    // Move image\n    swiper.wrapperEl.removeEventListener('pointermove', onTouchMove, activeListenerWithCapture);\n  }\n  on('init', () => {\n    if (swiper.params.zoom.enabled) {\n      enable();\n    }\n  });\n  on('destroy', () => {\n    disable();\n  });\n  on('touchStart', (_s, e) => {\n    if (!swiper.zoom.enabled) return;\n    onTouchStart(e);\n  });\n  on('touchEnd', (_s, e) => {\n    if (!swiper.zoom.enabled) return;\n    onTouchEnd();\n  });\n  on('doubleTap', (_s, e) => {\n    if (!swiper.animating && swiper.params.zoom.enabled && swiper.zoom.enabled && swiper.params.zoom.toggle) {\n      zoomToggle(e);\n    }\n  });\n  on('transitionEnd', () => {\n    if (swiper.zoom.enabled && swiper.params.zoom.enabled) {\n      onTransitionEnd();\n    }\n  });\n  on('slideChange', () => {\n    if (swiper.zoom.enabled && swiper.params.zoom.enabled && swiper.params.cssMode) {\n      onTransitionEnd();\n    }\n  });\n  Object.assign(swiper.zoom, {\n    enable,\n    disable,\n    in: zoomIn,\n    out: zoomOut,\n    toggle: zoomToggle\n  });\n}\n\nexport { Zoom as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}